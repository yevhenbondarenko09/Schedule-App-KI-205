<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–†–æ–∑–∫–ª–∞–¥ –ö–Ü-205</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #2E365A;
            --secondary-color: #6C5E82;
            --accent-pink: #E0797F;
            --soft-blue: #96A4C5;
            --card-bg: #3B446B;
            --text-main: #FFFFFF;
            --text-muted: #B0BCD5;
            --success: #6CAE82;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            min-height: 100vh;
            padding-bottom: 40px;
        }

        /* --- Header & Controls --- */
        header {
            background-color: rgba(46, 54, 90, 0.95);
            padding: 20px 20px 10px;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(150, 164, 197, 0.1);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .current-time {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .date-info {
            font-size: 0.85rem;
            color: var(--soft-blue);
            text-align: right;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        /* --- Toggles --- */
        .toggle-container {
            background: rgba(0,0,0,0.2);
            border-radius: 50px;
            padding: 4px;
            display: flex;
            position: relative;
        }

        .toggle-btn {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--soft-blue);
            padding: 8px 0;
            font-size: 0.8rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .toggle-btn.active {
            background-color: var(--secondary-color);
            color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .toggle-btn.subgroup-active {
            background-color: var(--accent-pink);
            color: white;
        }

        /* --- Schedule List --- */
        .container {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .day-card {
            margin-bottom: 25px;
            animation: fadeIn 0.5s ease;
        }

        .day-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding-left: 10px;
            border-left: 4px solid var(--soft-blue);
        }

        .day-header h2 {
            font-size: 1.2rem;
            margin-right: 10px;
        }

        .day-header.is-today h2 {
            color: var(--accent-pink);
        }
        
        .day-header.is-today {
            border-left-color: var(--accent-pink);
        }

        .lesson-card {
            background-color: var(--card-bg);
            border-radius: 20px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid rgba(150, 164, 197, 0.1);
            position: relative;
            transition: transform 0.2s;
        }

        .lesson-card:active {
            transform: scale(0.98);
        }

        .lesson-time {
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--soft-blue);
            background: rgba(0,0,0,0.2);
            padding: 4px 10px;
            border-radius: 12px;
        }

        .lesson-subject {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 8px;
            padding-right: 80px; /* Space for time */
            line-height: 1.4;
        }

        .tags {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .tag {
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 8px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .tag.lecture { background-color: rgba(108, 94, 130, 0.3); color: #C4B5D6; border: 1px solid var(--secondary-color); }
        .tag.lab { background-color: rgba(224, 121, 127, 0.2); color: var(--accent-pink); border: 1px solid var(--accent-pink); }
        .tag.practical { background-color: rgba(108, 174, 130, 0.2); color: var(--success); border: 1px solid var(--success); }

        .lesson-details {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .detail-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-icon { opacity: 0.7; font-size: 1.1em; }

        /* Free Window State */
        .free-window {
            background-color: transparent;
            border: 2px dashed rgba(150, 164, 197, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: var(--text-muted);
            font-style: italic;
        }

        /* Utilities */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <header>
        <div class="top-bar">
            <div class="current-time" id="clock">00:00</div>
            <div class="date-info">
                <div id="current-date">...</div>
                <div style="font-weight:bold; color: var(--accent-pink);" id="week-indicator">...</div>
            </div>
        </div>

        <div class="controls-grid">
            <!-- Week Toggle -->
            <div class="toggle-container">
                <button class="toggle-btn" id="btn-numerator" onclick="setWeekType('numerator')">–ß–∏—Å–µ–ª—å–Ω–∏–∫</button>
                <button class="toggle-btn" id="btn-denominator" onclick="setWeekType('denominator')">–ó–Ω–∞–º–µ–Ω–Ω–∏–∫</button>
            </div>

            <!-- Subgroup Toggle -->
            <div class="toggle-container">
                <button class="toggle-btn" id="btn-sub1" onclick="setSubgroup(1)">–ü—ñ–¥–≥—Ä—É–ø–∞ 1</button>
                <button class="toggle-btn" id="btn-sub2" onclick="setSubgroup(2)">–ü—ñ–¥–≥—Ä—É–ø–∞ 2</button>
            </div>
        </div>
    </header>

    <main class="container" id="schedule-container">
        <!-- Content injected by JS -->
    </main>

    <script>
        // --- 1. CONFIGURATION & DATA ---
        const SEMESTER_START = new Date("2026-02-09T00:00:00"); 
        
        // Exact Data Structure provided
        const scheduleData = [
          {
            day: "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫",
            lessons: [
              {
                id: 1, time: "08:30 - 09:50", items: [
                  { subject: "–ê–ª–≥–æ—Ä–∏—Ç–º–∏ —Ç–∞ –º–æ–¥–µ–ª—ñ –æ–±—á–∏—Å–ª–µ–Ω—å", type: "Lab", teacher: "–°—î—á–∫–æ –û.–Ü.", room: "905 V –Ω.–∫.", subgroup: 1, week: "both" },
                  { subject: "–ú–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–∏—Ö —Å–∏—Å—Ç–µ–º", type: "Lab", teacher: "–ë—É–¥–∑ –Ü.–°.", room: "907 V –Ω.–∫.", subgroup: 2, week: "both" }
                ]
              },
              {
                id: 2, time: "10:05 - 11:25", items: [
                  { subject: "–ê–ª–≥–æ—Ä–∏—Ç–º–∏ —Ç–∞ –º–æ–¥–µ–ª—ñ –æ–±—á–∏—Å–ª–µ–Ω—å", type: "Lab", teacher: "–°—î—á–∫–æ –û.–Ü.", room: "905 V –Ω.–∫.", subgroup: 2, week: "both" }
                ]
              },
              {
                id: 3, time: "11:40 - 13:00", items: [
                  { subject: "–§—ñ–ª–æ—Å–æ—Ñ—ñ—è", type: "Lecture", teacher: "–ß—É—Ä—Å—ñ–Ω–æ–≤–∞ –û.–Æ.", room: "411 I –Ω.–∫.", subgroup: "both", week: "both" }
                ]
              },
              {
                id: 4, time: "13:15 - 14:35", items: [
                  { subject: "–ú–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–∏—Ö —Å–∏—Å—Ç–µ–º", type: "Lab", teacher: "–ë—É–¥–∑ –Ü.–°.", room: "907 V –Ω.–∫.", subgroup: 1, week: "both" }
                ]
              }
            ]
          },
          {
            day: "–í—ñ–≤—Ç–æ—Ä–æ–∫",
            lessons: [
              {
                id: 1, time: "08:30 - 09:50", items: [
                  { subject: "–°–∏—Å—Ç–µ–º–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, —á–∞—Å—Ç–∏–Ω–∞ 1", type: "Lecture", teacher: "–ü—É–π–¥–∞ –î.–í.", room: "512 V –Ω.–∫.", subgroup: "both", week: "both" }
                ]
              },
              {
                id: 2, time: "10:05 - 11:25", items: [
                  { subject: "–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –±–∞–∑ –¥–∞–Ω–∏—Ö", type: "Lecture", teacher: "–ö–æ–ª–æ–¥—á–∞–∫ –û.–ú.", room: "906 V –Ω.–∫.", subgroup: "both", week: "both" }
                ]
              },
              {
                id: 3, time: "11:40 - 13:00", items: [
                  { subject: "–§—ñ–ª–æ—Å–æ—Ñ—ñ—è", type: "Practical", teacher: "–ü–∞–Ω—å–∫–æ –û.–Ü.", room: "902 V –Ω.–∫.", subgroup: "both", week: "both" }
                ]
              }
            ]
          },
          {
            day: "–°–µ—Ä–µ–¥–∞",
            lessons: [
              {
                id: 1, time: "08:30 - 09:50", items: [
                  { subject: "–ú–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–∏—Ö —Å–∏—Å—Ç–µ–º", type: "Lecture", teacher: "–ë—É–¥–∑ –Ü.–°.", room: "906 V –Ω.–∫.", subgroup: "both", week: "both" }
                ]
              },
              {
                id: 2, time: "10:05 - 11:25", items: [
                  { subject: "–°–∏—Å—Ç–µ–º–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, —á–∞—Å—Ç–∏–Ω–∞ 1", type: "Lab", teacher: "–ú–∞–∫—Å–∏–º—ñ–≤ –ú.–†.", room: "505a2 V –Ω.–∫.", subgroup: 1, week: "numerator" },
                  { subject: "–°–∏—Å—Ç–µ–º–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, —á–∞—Å—Ç–∏–Ω–∞ 1", type: "Lab", teacher: "–ú–∞–∫—Å–∏–º—ñ–≤ –ú.–†.", room: "505a2 V –Ω.–∫.", subgroup: 2, week: "denominator" }
                ]
              }
            ]
          },
          {
            day: "–ß–µ—Ç–≤–µ—Ä",
            lessons: [
              {
                id: 1, time: "08:30 - 09:50", items: [
                  { subject: "–ê–ª–≥–æ—Ä–∏—Ç–º–∏ —Ç–∞ –º–æ–¥–µ–ª—ñ –æ–±—á–∏—Å–ª–µ–Ω—å", type: "Lecture", teacher: "–ö–æ–ª–æ–¥—ñ–π –ó.–û.", room: "906 V –Ω.–∫.", subgroup: "both", week: "both" }
                ]
              },
              {
                id: 2, time: "10:05 - 11:25", items: [
                  { subject: "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω—ñ–∫–∞", type: "Lab", teacher: "–ß–µ—Ä—á–∏–∫ –ì.–¢.", room: "509 V –Ω.–∫.", subgroup: 1, week: "both" },
                  { subject: "–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –±–∞–∑ –¥–∞–Ω–∏—Ö", type: "Lab", teacher: "–Ü–≤–∞–Ω–æ–≤ –Æ.–°.", room: "505a2 V –Ω.–∫.", subgroup: 2, week: "both" }
                ]
              },
              {
                id: 3, time: "11:40 - 13:00", items: [
                  { subject: "–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –±–∞–∑ –¥–∞–Ω–∏—Ö", type: "Lab", teacher: "–Ü–≤–∞–Ω–æ–≤ –Æ.–°.", room: "505a2 V –Ω.–∫.", subgroup: 1, week: "both" },
                  { subject: "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω—ñ–∫–∞", type: "Lab", teacher: "–ß–µ—Ä—á–∏–∫ –ì.–¢.", room: "509 V –Ω.–∫.", subgroup: 2, week: "both" }
                ]
              }
            ]
          },
          {
            day: "–ü'—è—Ç–Ω–∏—Ü—è",
            lessons: [
              {
                id: 2, time: "10:05 - 11:25", items: [
                  { subject: "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω—ñ–∫–∞", type: "Practical", teacher: "–ß–µ—Ä—á–∏–∫ –ì.–¢.", room: "902 V –Ω.–∫.", subgroup: "both", week: "numerator" },
                  { subject: "–°–∏—Å—Ç–µ–º–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, —á–∞—Å—Ç–∏–Ω–∞ 1", type: "Practical", teacher: "–ú–∞–∫—Å–∏–º—ñ–≤ –ú.–†.", room: "902 V –Ω.–∫.", subgroup: "both", week: "denominator" }
                ]
              },
              {
                id: 3, time: "11:40 - 13:00", items: [
                  { subject: "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω—ñ–∫–∞", type: "Lecture", teacher: "–ü–∞—Ä–∞–ª—é—Ö –Ü.–ü., –ö–ª—É—à–∏–Ω –Æ.–°.", room: "512 V –Ω.–∫.", subgroup: "both", week: "both" }
                ]
              }
            ]
          }
        ];

        // --- 2. STATE MANAGEMENT ---
        const state = {
            weekType: 'numerator', // 'numerator' | 'denominator'
            subgroup: 1 // 1 | 2
        };

        // --- 3. LOGIC ---

        function init() {
            // 1. Calculate current week type automatically
            const autoWeek = calculateWeekType();
            state.weekType = autoWeek;

            // 2. Load subgroup from LocalStorage
            const savedSubgroup = localStorage.getItem('ki205_subgroup');
            if (savedSubgroup) {
                state.subgroup = parseInt(savedSubgroup);
            }

            // 3. Start Clock
            updateTime();
            setInterval(updateTime, 1000);

            // 4. Initial Render
            updateUI();
        }

        function calculateWeekType() {
            const now = new Date();
            // Reset times to midnight to avoid hour calculation issues
            const start = new Date(SEMESTER_START);
            start.setHours(0,0,0,0);
            const current = new Date(now);
            current.setHours(0,0,0,0);

            const diffTime = current - start;
            if(diffTime < 0) return 'numerator'; // Before semester starts

            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            const weekNumber = Math.floor(diffDays / 7);

            // Even weeks (0, 2, 4...) relative to start are Numerator
            // Odd weeks (1, 3, 5...) relative to start are Denominator
            return (weekNumber % 2 === 0) ? 'numerator' : 'denominator';
        }

        function updateTime() {
            const now = new Date();
            
            // Clock
            const timeString = now.toLocaleTimeString('uk-UA', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('clock').innerText = timeString;

            // Date
            const options = { weekday: 'long', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('uk-UA', options);
            document.getElementById('current-date').innerText = dateString.charAt(0).toUpperCase() + dateString.slice(1);
        }

        function setSubgroup(val) {
            state.subgroup = val;
            localStorage.setItem('ki205_subgroup', val);
            updateUI();
        }

        function setWeekType(val) {
            state.weekType = val;
            updateUI();
        }

        function updateUI() {
            // Update Controls Visuals
            document.getElementById('btn-numerator').className = `toggle-btn ${state.weekType === 'numerator' ? 'active' : ''}`;
            document.getElementById('btn-denominator').className = `toggle-btn ${state.weekType === 'denominator' ? 'active' : ''}`;
            
            document.getElementById('btn-sub1').className = `toggle-btn ${state.subgroup === 1 ? 'subgroup-active' : ''}`;
            document.getElementById('btn-sub2').className = `toggle-btn ${state.subgroup === 2 ? 'subgroup-active' : ''}`;

            document.getElementById('week-indicator').innerText = state.weekType === 'numerator' ? '–ß–∏—Å–µ–ª—å–Ω–∏–∫' : '–ó–Ω–∞–º–µ–Ω–Ω–∏–∫';

            renderSchedule();
        }

        function getDayIndex(dayName) {
            const map = { "–ü–æ–Ω–µ–¥—ñ–ª–æ–∫": 1, "–í—ñ–≤—Ç–æ—Ä–æ–∫": 2, "–°–µ—Ä–µ–¥–∞": 3, "–ß–µ—Ç–≤–µ—Ä": 4, "–ü'—è—Ç–Ω–∏—Ü—è": 5 };
            return map[dayName] || 0;
        }

        function renderSchedule() {
            const container = document.getElementById('schedule-container');
            container.innerHTML = '';

            const currentDayIndex = new Date().getDay(); // 0=Sun, 1=Mon...

            scheduleData.forEach(dayData => {
                const dayIndex = getDayIndex(dayData.day);
                const isToday = dayIndex === currentDayIndex;

                // Create Day Wrapper
                const dayWrapper = document.createElement('div');
                dayWrapper.className = 'day-card';
                
                const headerHtml = `
                    <div class="day-header ${isToday ? 'is-today' : ''}">
                        <h2>${dayData.day}</h2>
                        ${isToday ? '<span style="font-size:0.8rem; background:var(--accent-pink); padding:2px 8px; border-radius:10px;">–°—å–æ–≥–æ–¥–Ω—ñ</span>' : ''}
                    </div>
                `;
                dayWrapper.innerHTML = headerHtml;

                let hasLessonsForSomeone = false;

                // Process Lessons
                dayData.lessons.forEach(lessonSlot => {
                    // Logic: 
                    // 1. Check if there are lessons for *selected* group in *current* week
                    const myLesson = lessonSlot.items.find(item => 
                        (item.week === 'both' || item.week === state.weekType) && 
                        (item.subgroup === 'both' || item.subgroup === state.subgroup)
                    );

                    // 2. Check if there are lessons for *any* group (to detect empty window vs end of day)
                    // Actually, the prompt says: "If a timeslot has no lessons for the selected subgroup (but has for the other), show Free Window".
                    // So we check if there are ANY items for this slot in the JSON generally? 
                    // The JSON structure has `items` array. If that array has items, a class exists at this time.
                    const anyLessonAtAll = lessonSlot.items.length > 0;

                    if (myLesson) {
                        hasLessonsForSomeone = true;
                        dayWrapper.innerHTML += createLessonCard(myLesson, lessonSlot.time);
                    } else if (anyLessonAtAll) {
                        // Check if the reason we don't have a lesson is simply because it's for the other subgroup/week
                        // If the slot exists in JSON, it means *someone* has class. If I don't, I have a window.
                        const otherLesson = lessonSlot.items.find(item => 
                           (item.week === 'both' || item.week === state.weekType) && 
                           (item.subgroup !== 'both' && item.subgroup !== state.subgroup)
                        );
                        
                        // Only show window if it's the right week but wrong subgroup
                        if(otherLesson) {
                             hasLessonsForSomeone = true;
                             dayWrapper.innerHTML += `
                                <div class="lesson-card free-window">
                                    <span>–í—ñ–∫–Ω–æ (${lessonSlot.time})</span>
                                </div>
                             `;
                        }
                    }
                });

                // Only append day if it has content
                if (hasLessonsForSomeone) {
                    container.appendChild(dayWrapper);
                }
            });
        }

        function createLessonCard(item, time) {
            let typeClass = '';
            if(item.type.includes('Lab')) typeClass = 'lab';
            else if(item.type.includes('Lecture')) typeClass = 'lecture';
            else typeClass = 'practical';

            let typeLabel = item.type;
            if(typeLabel === 'Lab') typeLabel = '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞';
            if(typeLabel === 'Lecture') typeLabel = '–õ–µ–∫—Ü—ñ—è';
            if(typeLabel === 'Practical') typeLabel = '–ü—Ä–∞–∫—Ç–∏—á–Ω–∞';

            return `
                <div class="lesson-card">
                    <div class="lesson-time">${time}</div>
                    <div class="lesson-subject">${item.subject}</div>
                    
                    <div class="tags">
                        <span class="tag ${typeClass}">${typeLabel}</span>
                        <span class="tag" style="background: rgba(150, 164, 197, 0.2); border: 1px solid var(--soft-blue); color: var(--soft-blue);">${item.room}</span>
                    </div>

                    <div class="lesson-details">
                        <div class="detail-row">
                            <span class="detail-icon">üéì</span>
                            <span>${item.teacher}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Run
        init();

    </script>
</body>
</html>